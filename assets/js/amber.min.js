var Amber=function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i={join:"join",leave:"leave",message:"message"},c=function(){return(new Date).getTime()},a=function(e){return(c()-e)/1e3},s=t.Channel=function(){function e(t,n){o(this,e),this.topic=t,this.socket=n,this.onMessageHandlers=[]}return r(e,[{key:"join",value:function(){this.socket.ws.send(JSON.stringify({event:i.join,topic:this.topic}))}},{key:"leave",value:function(){this.socket.ws.send(JSON.stringify({event:i.leave,topic:this.topic}))}},{key:"handleMessage",value:function(e){this.onMessageHandlers.forEach(function(t){t.subject===e.subject&&t.callback(e.payload)})}},{key:"on",value:function(e,t){this.onMessageHandlers.push({subject:e,callback:t})}},{key:"push",value:function(e,t){this.socket.ws.send(JSON.stringify({event:i.message,topic:this.topic,subject:e,payload:t}))}}]),e}(),u=t.Socket=function(){function e(t){o(this,e),this.endpoint=t,this.ws=null,this.channels=[],this.lastPing=c(),this.reconnectTries=0,this.attemptReconnect=!0}return r(e,[{key:"_connectionIsStale",value:function(){return a(this.lastPing)>100}},{key:"_reconnect",value:function(){var e=this;clearTimeout(this.reconnectTimeout),this.reconnectTimeout=setTimeout(function(){e.reconnectTries++,e.connect(e.params),e._reconnect()},this._reconnectInterval())}},{key:"_reconnectInterval",value:function(){return[1e3,2e3,5e3,1e4][this.reconnectTries]||1e4}},{key:"_poll",value:function(){var e=this;this.pollingTimeout=setTimeout(function(){e._connectionIsStale()?e._reconnect():e._poll()},1e4)}},{key:"_startPolling",value:function(){clearTimeout(this.pollingTimeout),this._poll()}},{key:"_handlePing",value:function(){this.lastPing=c()}},{key:"_reset",value:function(){clearTimeout(this.reconnectTimeout),this.reconnectTries=0,this.attemptReconnect=!0,this._startPolling()}},{key:"connect",value:function(e){var t=this;this.params=e;var n={location:window.location.hostname,port:window.location.port,protocol:"https:"===window.location.protocol?"wss:":"ws:"};return e&&Object.assign(n,e),n.port&&(n.location+=":"+n.port),new Promise(function(e,o){t.ws=new WebSocket(n.protocol+"//"+n.location+t.endpoint),t.ws.onmessage=function(e){t.handleMessage(e)},t.ws.onclose=function(){t.attemptReconnect&&t._reconnect()},t.ws.onopen=function(){t._reset(),e()}})}},{key:"disconnect",value:function(){this.attemptReconnect=!1,clearTimeout(this.pollingTimeout),clearTimeout(this.reconnectTimeout),this.ws.close()}},{key:"channel",value:function(e){var t=new s(e,this);return this.channels.push(t),t}},{key:"handleMessage",value:function(e){if("ping"===e.data)return this._handlePing();var t=JSON.parse(e.data);this.channels.forEach(function(e){e.topic===t.topic&&e.handleMessage(t)})}}]),e}();e.exports={Socket:u},n(1),document.addEventListener("DOMContentLoaded",function(){Array.from(document.querySelectorAll("a[data-method='delete']")).forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=e.getAttribute("data-confirm")||"Are you sure?";if(confirm(n)){var o=document.createElement("form"),r=document.createElement("input");o.setAttribute("action",e.getAttribute("href")),o.setAttribute("method","POST"),r.setAttribute("type","hidden"),r.setAttribute("name","_method"),r.setAttribute("value","DELETE"),o.appendChild(r),document.body.appendChild(o),o.submit()}return!1})})})},function(e,t,n){"use strict";Date.prototype.toGranite||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toGranite=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+" "+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())}}(),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,o=new Array(n);n--;)o[n]=[t[n],e[t[n]]];return o}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},writable:!0,configurable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],r=0;r<n;){var i=t[r];if(e.call(o,i,r,t))return i;r++}},configurable:!0,writable:!0}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},o=function(e){return n(e)>>>0};return function(e){var n=this,r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,c=arguments.length>1?arguments[1]:void 0;if(void 0!==c){if(!t(c))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var a,s=o(r.length),u=t(n)?Object(new n(s)):new Array(s),l=0;l<s;)a=r[l],u[l]=c?void 0===i?c(a,l):c.call(i,a,l):a,l+=1;return u.length=s,u}}())}]);